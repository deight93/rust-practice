# 7장 정리: 패키지, 크레이트, 모듈로 프로젝트 관리하기

Rust에서 프로젝트가 커질수록 코드를 체계적으로 관리하는 것이 중요합니다. 이 장에서는 **패키지, 크레이트, 모듈**을 사용해 코드의 범위와 가시성을 제어하고, 구조를 조직화하는 방법을 다룹니다.

---

### 1. 핵심 개념 정리

* **패키지 (Package)**

    * `Cargo.toml` 파일을 포함하여 하나 이상의 크레이트를 관리
    * 바이너리 크레이트(실행 프로그램)와 라이브러리 크레이트를 동시에 가질 수 있음

* **크레이트 (Crate)**

    * Rust 컴파일러가 컴파일 단위로 인식하는 트리 구조
    * 라이브러리 크레이트: 여러 프로젝트에서 재사용 가능
    * 바이너리 크레이트: 실행 가능한 프로그램

* **모듈 (Module)**

    * 코드의 스코프와 가시성을 제어하는 단위
    * `mod` 키워드로 정의
    * `pub` 키워드로 공개 여부를 설정 (기본은 비공개)

* **use 키워드**

    * 경로(Path)를 현재 스코프로 가져와 더 짧고 간결한 호출 가능

* **경로 (Path)**

    * 절대 경로: `crate::` 또는 외부 크레이트 이름으로 시작
    * 상대 경로: 현재 모듈 위치 기준 (`super`, `self`)

---

### 2. 모듈 정의와 사용

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    // 절대 경로
    crate::front_of_house::hosting::add_to_waitlist();

    // 상대 경로
    front_of_house::hosting::add_to_waitlist();
}
```

* `mod`로 모듈 정의
* `pub`이 없으면 외부 모듈에서 접근 불가
* `crate::`는 루트부터 접근하는 절대 경로

---

### 3. use로 경로 단축

```rust
use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist(); // use로 단축
}
```

* `use`는 모듈의 경로를 현재 스코프에 가져옴
* 관용적으로 함수보다는 **모듈 단위**를 가져오는 것을 권장

    * 예: `use std::collections::HashMap;`

---

### 4. pub use (재공개)

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

// 재공개 (외부에서 front_of_house를 몰라도 접근 가능)
pub use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
}
```

* `pub use`를 사용하면 외부 코드에서 모듈의 내부 구조를 몰라도 접근 가능
* 라이브러리의 **공식 API 인터페이스**를 정리할 때 유용

---

### 5. 모듈을 다른 파일로 분리하기

* `mod` 선언은 한 번만 필요
* 파일 구조와 모듈 트리가 매칭됨

예시:

**src/lib.rs**

```rust
mod front_of_house; // 파일로 분리된 모듈 불러오기
```

**src/front\_of\_house.rs**

```rust
pub mod hosting {
    pub fn add_to_waitlist() {}
}
```

* `front_of_house`는 `src/front_of_house.rs`로 분리됨
* 하위 모듈은 `src/front_of_house/hosting.rs` 형태로 위치

---

### 6. 정리

* **패키지**: 프로젝트 단위
* **크레이트**: 라이브러리/바이너리 단위
* **모듈**: 코드 구조 및 가시성 단위
* **use / pub use**: 경로 단축 및 재공개
* **파일 분리**: 모듈이 커질수록 별도 파일로 관리
